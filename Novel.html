<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Angels of Earth</title>

  <!-- Tailwind CSS + DaisyUI -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/daisyui@3.7.7/dist/full.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            russo: ['"Russo One"', 'sans-serif'],
            outfit: ['"Outfit"', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Russo+One&display=swap" rel="stylesheet" />
  
  <!-- Twine Story Data -->
  <script id="storyData" type="application/json">
    {
      "chapters": [
        {
          "title": "Chapter 1: The Cathedral of Chaos",
          "passages": [
            {
              "pid": 1,
              "content": "ANGELS OF EARTH REVISED SCRIPT 1.1 9/10 Mary Remy also known as R.R\n\nINT. KOH REALM ABANDONED CATHEDRAL - NIGHT\n\nMICAH lays flat on his back. A cold wind goes by, it brushes his curls. He wakes up blinking slowly, confused.",
              "links": [
                {"pid": 2, "name": "Continue"}
              ]
            },
            {
              "pid": 2,
              "content": "He looks around as he sits up. He swings his legs off the stone pew and stands.\n\nMICAH\n(bitterly, muttering)\nThis dream again.\n\n[[Continue|3]]\n\n[img[images/sample.jpg]]"
            }
          ]
        }
      ]
    }
  </script>
</head>

<body class="bg-white font-outfit">
  <!-- Your existing header -->
  <header class="bg-[#29DDFF] text-white font-semibold font-russo py-4 w-full h-[80px] flex items-center relative px-6">
    <!-- ... keep your existing header code ... -->
  </header>

  <!-- Modified Novel Reader Section -->
  <section class="px-6 py-10 flex flex-col items-center gap-6 font-outfit">
    <div class="w-full max-w-4xl flex justify-center mb-4 relative items-center space-x-4">
      <!-- Chapter dropdown -->
      <div class="relative w-[200px]">
        <select id="chapterSelect" class="appearance-none w-full rounded px-4 py-2 text-sm pr-10 bg-[#29DDFF] text-white h-[38px] font-russo">
          <option value="0">Chapter 1: The Cathedral</option>
        </select>
        <div class="pointer-events-none absolute top-0 right-0 h-full w-10 bg-[#29DDFF] flex items-center justify-center rounded-r">
          <img src="images/triangle.svg" alt="arrow" class="w-3 h-3 rotate-180 brightness-0 invert" />
        </div>
      </div>

      <img src="images/bookmark.png" alt="bookmark" class="h-[100px] w-auto" />
    </div>

    <!-- Twine Content Display -->
    <div class="flex items-center justify-center w-full">
      <button id="prevBtn" class="w-20 h-20 cursor-pointer mr-4">
        <img src="images/arrowleft.png" alt="Left Arrow" />
      </button>
      
      <div class="bg-[#E3F9FF] p-6 shadow-md flex gap-6" style="width: 1040px;">
        <div id="twineContent" class="w-full">
          <!-- Content will be loaded here by JavaScript -->
        </div>
      </div>
      
      <button id="nextBtn" class="w-20 h-20 cursor-pointer ml-4">
        <img src="images/arrowright.png" alt="Right Arrow" />
      </button>
    </div>
  </section>

  <!-- Your existing footer -->
  <footer class="bg-[#8DDFFD] text-black font-semibold font-russo text-center py-4 w-full">
    <p class="text-[10px] text-white">2024 Angels of Earth. All rights reserved.</p>
  </footer>

  <!-- New Twine Integration Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Load story data
      const storyData = JSON.parse(document.getElementById('storyData').textContent);
      let currentChapter = 0;
      let currentPassage = 0;
      
      // Display initial passage
      displayPassage(storyData.chapters[currentChapter].passages[currentPassage]);
      
      // Navigation handlers
      document.getElementById('nextBtn').addEventListener('click', () => {
        const chapter = storyData.chapters[currentChapter];
        if (currentPassage < chapter.passages.length - 1) {
          currentPassage++;
          displayPassage(chapter.passages[currentPassage]);
        }
      });
      
      document.getElementById('prevBtn').addEventListener('click', () => {
        if (currentPassage > 0) {
          currentPassage--;
          displayPassage(storyData.chapters[currentChapter].passages[currentPassage]);
        }
      });
      
      function displayPassage(passage) {
        const contentDiv = document.getElementById('twineContent');
        
        // Basic Twine content rendering
        let html = passage.content
          .replace(/\[\[(.*?)\|(.*?)\]\]/g, '<a href="#" class="text-[#29DDFF] font-bold">$1</a>')
          .replace(/\[img\[(.*?)\]\]/g, '<img src="$1" class="my-4 mx-auto max-w-full" />');
          
        contentDiv.innerHTML = `
          <div class="prose max-w-none">
            ${html}
          </div>
        `;
      }
    });
  </script>
</body>
</html>

<!-- Script at the BOTTOM of body -->
<script src="js/novel-reader.js"></script> 
</body>
</html>
